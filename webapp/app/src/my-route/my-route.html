<link rel="import" href="../../elements/elements.html">

<link rel="import" href="../../src/my-home/my-home.html">
<link rel="import" href="../../src/my-home/my-info.html">
<link rel="import" href="../../src/my-login/my-login.html">
<link rel="import" href="../../src/my-admin/my-admin.html">
<link rel="import" href="../../src/my-admin/my-klassen.html">
<link rel="import" href="../../src/my-admin/my-docenten.html">
<link rel="import" href="../../src/my-admin/my-roosters.html">


<dom-module id="my-route">
  <link rel="import" type="css" href="../../styles/mainStyle.css">
  <template>

    <app-location route="{{_route}}" use-hash-as-path></app-location>

    <app-route route="{{_route}}"
               pattern="/:page"
               data="{{_routeData}}"
               tail="{{_routeTail}}"
               active="{{_active}}"></app-route>

    <app-route route="{{_routeTail}}"
               pattern="/:subPage"
               data="{{_subRouteData}}"
               tail="{{_subRouteTail}}"
               active="{{_subRouteActive}}"></app-route>

  <paper-drawer-panel force-narrow>
    <paper-header-panel drawer>

      <paper-toolbar>
        <paper-icon-button icon="close" paper-drawer-toggle></paper-icon-button>
        <div style="margin-left: 10px; font-size: 20px;">Menu</div>
      </paper-toolbar>

      <div class="menu">
        <iron-selector selected='[[_routeData.page]]' attr-for-selected='name'>
          <a name="home" class="menuLink" href="#/home"><span>Home</span></a>
          <a name="admin" class="menuLink" href="#/admin"><span>Admin</span></a>
          <a name="logout" class="menuLink" href="#/login"><span>Logout</span></a>
        </iron-selector>
      </div>

    </paper-header-panel>

    <paper-header-panel main>
      <paper-toolbar>

        <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
        <div style="font-size: 20px;">StudentHUb</div>
        <div class="title">[[_routeData.page]]</div>

      </paper-toolbar>

      <div class="container">
          <div class="content">
            <section id="main">
              <iron-pages selected='[[_routeData.page]]' attr-for-selected='name'>
                <my-login id="my_login" name="login" gebruiker={{gebruiker}}></my-login>
                <my-home id="my_home" name="home" active="{{_subRouteActive}}" gebruiker={{gebruiker}}></my-home>
                <my-admin id="my_admin" name="admin" active="{{_subRouteActive}}" gebruiker={{gebruiker}}></my-admin>
              </iron-pages>

            <template is="dom-if" if="[[_subRouteActive]]" restamp>
              <section id="sub">
                <iron-pages attr-for-selected="name" selected="[[_subRouteData.subPage]]">
                  <my-info name="klasInfo"></my-info>
                  <my-klassen name="klassen"></my-klassen>
                  <my-docenten name="docenten"></my-docenten>
                  <my-roosters name="roosters"></my-roosters>
                </iron-pages>
              </section>
            </template>

          </div>
      </div>

    </paper-header-panel>
  </paper-drawer-panel>

  </template>

  <script>

    Polymer({

      is: 'my-route',

      properties: {
        _route: {
          type:  Object,
        },
        _routeData:{
          type: Object,
          observer: "routeChanged"
        },
        _routeTail: Object,
        _active: Boolean,
        gebruiker: {
          type: Object
        }
      },

      routeChanged: function(){
        switch(this._routeData.page) {
            case "Login":
                //this.$.my_login.update();
                break;
            case "home":
                this.$.my_home.update();
                break;
            case "admin":
                this.$.my_admin.update();
                break;
        }
      },

      attached: function() {
        if (!this._route.path) {
          this.set('_route.path', '/login');
        }
      },

    })

  </script>
</dom-module>
