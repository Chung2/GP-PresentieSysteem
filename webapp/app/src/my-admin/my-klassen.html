<link rel="import" href="../../elements/elements.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">

<!-- <h1>{{klas.naam}}</h1>
<template is="dom-repeat" items="[[klas.deStudenten]]">
  <my-student gebruikersnaam="{{item.gebruikersnaam}}">
  </my-student>
</template> -->

<dom-module id="my-klassen">
<link rel="import" type="css" href="../../styles/mainStyle.css">
  <template>

    <iron-ajax
        id="ajax_klassen"
        method="POST"
        url="/klassen/info"
        handle-as="json"
        on-response="ajax_klassen_handler">
    </iron-ajax>

    <div class="">
      <paper-card class="holder" elevation="2">
        <template is="dom-repeat" items="{{klassen}}">
          <h1>{{item.naam}}</h1>
          Klascode: {{item.klasCode}}<br>
          Aantal studenten: {{item.deStudenten.length}}
          <hr>
          <vaadin-grid items="[[item.deStudenten]]">
             <table>
               <colgroup>
                 <col name="voornaam" resizable>
                 <col name="tussenvoegsel" resizable>
                 <col name="achternaam" resizable sortable sort-direction="asc">
                 <col name="studentNummer" resizable>
                 <col name="ziek" resizable>
               </colgroup>
             </table>
          </vaading-grid>
        </template>

      </paper-card>
    </div>


  </template>

  <script>

      Polymer({

        is: 'my-klassen',

        ajax_klassen_start: function(){
          this.$.ajax_klassen.contentType="application/json";
          this.$.ajax_klassen.body={
          };

            this.$.ajax_klassen.generateRequest();
        },

        ajax_klassen_handler: function(request){

          this.klassen =
            request.detail.response;
            console.log(this.klassen + this.klassen.deStudenten);

        },

        ready: function() {
          this.ajax_klassen_start();
        }
      })

  </script>

</dom-module>
